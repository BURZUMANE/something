{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from \"react\";\nexport function usePolling(interval, cb, abortCb) {\n  _s();\n  const [data, setData] = useState(null);\n  const [isLoading, setIsLoading] = useState(false);\n  useEffect(() => {\n    const fetchData = async () => {\n      setIsLoading(true);\n      const response = await cb();\n      setData(response);\n      setIsLoading(false);\n    };\n    fetchData().then();\n    const intervalId = setInterval(fetchData, interval);\n    return () => {\n      clearInterval(intervalId);\n      abortCb().abort();\n    };\n  }, [abortCb, cb, interval]);\n  return {\n    data,\n    isLoading\n  };\n}\n_s(usePolling, \"g3zYJBKDotUKdhn6CEROgYKG7Lw=\");","map":{"version":3,"names":["useEffect","useState","usePolling","interval","cb","abortCb","data","setData","isLoading","setIsLoading","fetchData","response","then","intervalId","setInterval","clearInterval","abort"],"sources":["/Users/puz/something/src/hooks/usePolling.ts"],"sourcesContent":["import {useEffect, useState} from \"react\";\n\nexport function usePolling<T>(interval: number, cb: Function, abortCb: () => AbortController) {\n  const [data, setData] = useState<T | null>(null);\n  const [isLoading, setIsLoading] = useState(false);\n\n  useEffect(() => {\n    const fetchData = async () => {\n      setIsLoading(true);\n      const response: T = await cb()\n      setData(response);\n\n      setIsLoading(false);\n    };\n\n    fetchData().then();\n\n    const intervalId = setInterval(fetchData, interval);\n\n    return () => {\n      clearInterval(intervalId);\n      abortCb().abort();\n    };\n  }, [abortCb, cb, interval]);\n\n  return {data, isLoading};\n}\n"],"mappings":";AAAA,SAAQA,SAAS,EAAEC,QAAQ,QAAO,OAAO;AAEzC,OAAO,SAASC,UAAU,CAAIC,QAAgB,EAAEC,EAAY,EAAEC,OAA8B,EAAE;EAAA;EAC5F,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGN,QAAQ,CAAW,IAAI,CAAC;EAChD,MAAM,CAACO,SAAS,EAAEC,YAAY,CAAC,GAAGR,QAAQ,CAAC,KAAK,CAAC;EAEjDD,SAAS,CAAC,MAAM;IACd,MAAMU,SAAS,GAAG,YAAY;MAC5BD,YAAY,CAAC,IAAI,CAAC;MAClB,MAAME,QAAW,GAAG,MAAMP,EAAE,EAAE;MAC9BG,OAAO,CAACI,QAAQ,CAAC;MAEjBF,YAAY,CAAC,KAAK,CAAC;IACrB,CAAC;IAEDC,SAAS,EAAE,CAACE,IAAI,EAAE;IAElB,MAAMC,UAAU,GAAGC,WAAW,CAACJ,SAAS,EAAEP,QAAQ,CAAC;IAEnD,OAAO,MAAM;MACXY,aAAa,CAACF,UAAU,CAAC;MACzBR,OAAO,EAAE,CAACW,KAAK,EAAE;IACnB,CAAC;EACH,CAAC,EAAE,CAACX,OAAO,EAAED,EAAE,EAAED,QAAQ,CAAC,CAAC;EAE3B,OAAO;IAACG,IAAI;IAAEE;EAAS,CAAC;AAC1B;AAAC,GAxBeN,UAAU"},"metadata":{},"sourceType":"module","externalDependencies":[]}